function random(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";b.length<a;)b+=c.charAt(Math.floor(Math.random()*c.length));return b}var StoreFactory=function(){return this instanceof StoreFactory?(this.stores={},this):new StoreFactory};StoreFactory.prototype.get=function(a){return a||(a=random(10)+"::"),this.stores[a]||(this.stores[a]=new Store(a)),this.stores[a]},StoreFactory.prototype.destroy=function(){store.clear();for(var a in this.stores)this.stores[a].data={},delete this.stores[a];return this};var Store=function(a){if(!(this instanceof Store))return new Store(a);if(this.prefix=a,this.data={},store.enabled){var b=store.getAll();for(var c in b)c.substr(0,this.prefix.length)===this.prefix&&(this.data[c]=b[c])}return this};Store.prototype.get=function(a){return this.data[this.prefix+a]},Store.prototype.set=function(a,b){return this.data[this.prefix+a]=b,store.enabled&&store.set(this.prefix+a,b),this},Store.prototype.remove=function(a){return delete this.data[this.prefix+a],store.remove(this.prefix+a),this},Store.prototype.getAll=function(){var a=this,b={};for(var c in a.data)b[c]=a.data[c];return b},Store.prototype.clear=function(){var a=this;if(store.enabled)for(var b in a.data)b.substr(0,a.prefix.length)===a.prefix&&store.remove(b);return this.data={},this};